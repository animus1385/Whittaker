"use strict";function events(){var e=document.querySelectorAll(".card__like"),t=document.querySelector(".header"),r=document.querySelector(".header__bottom-nav"),n=document.querySelector(".header__discount-block"),c=document.querySelector(".hero "),i=document.querySelector(".market__btn"),o=document.querySelector(".market__list");e.forEach((function(e){e.addEventListener("click",(function(){this.classList.toggle("card__like--active")}))}));var a=0;window.addEventListener("scroll",(function(e){window.scrollY>a&&(a=window.scrollY),t.classList.remove("header--active"),window.scrollY<=35&&(t.classList.remove("header--active"),n.classList.remove("header__discount-block--active"),r.classList.remove("header__bottom-nav--active"),c.classList.remove("hero--active")),a>window.scrollY?(a=window.scrollY,t.classList.add("header--active"),r.classList.remove("header__bottom-nav--active"),n.classList.remove("header__discount-block--active"),c.classList.add("hero--active")):(t.classList.remove("header--active"),n.classList.add("header__discount-block--active"),r.classList.add("header__bottom-nav--active"),c.classList.add("hero--active"))})),i.addEventListener("click",(function(e){o.classList.add("market__list--active"),e.target.remove()}))}function accordion(){var e=document.querySelector(".accordion"),t=e.querySelectorAll(".accordion__item");function r(){var e=this.parentNode;t.forEach((function(t){e!=t||e.classList.toggle("active")}))}e.querySelectorAll(".accordion__title-block").forEach((function(e){return e.addEventListener("click",r)}))}function filter(){var e=document.querySelector(".market__btn-filter"),t=document.querySelector(".filter"),r=document.querySelectorAll(".market__card"),n=document.querySelector(".market__list"),c=document.querySelector(".filter__search"),i=document.querySelector(".market__btn"),o=new Choices(".market__sort",{searchEnabled:!1,searchChoices:!1,duplicateItemsAllowed:!1,editItems:!0,itemSelectText:"",classNames:{containerOuter:"choices market__sort"}});o.containerOuter.element.setAttribute("aria-label","sort");var a=document.createElement("div"),l=document.createElement("h2"),s=document.createElement("button"),d=[];function u(e){for(var t=0;t<e.length;t++){var r=e[t];n.append(r)}}a.classList.add("filter__title-block"),l.classList.add("filter__title-mobile","title"),s.classList.add("filter__btn-close"),l.textContent="Filter",a.append(l,s),e.addEventListener("click",(function(e){t.classList.add("filter--active"),t.prepend(a),document.body.classList.add("overflow")})),s.addEventListener("click",(function(){t.classList.remove("filter--active"),document.body.classList.remove("overflow")})),o.passedElement.element.addEventListener("choice",(function(e){"low"==e.detail.choice.value?(d.sort((function(e,t){var r=e.children[2].children[1].children[1].children[0].textContent;return t.children[2].children[1].children[1].children[0].textContent-r})),u(d)):(d.sort((function(e,t){return e.children[2].children[1].children[1].children[0].textContent-t.children[2].children[1].children[1].children[0].textContent})),u(d))})),c.addEventListener("submit",(function(e){var t=e.target.children[0].value;n.style.height="auto",i.remove(),r.forEach((function(e){e.remove()})),d=d.filter((function(e){e.children[2].children[0].textContent.includes(t)&&n.append(e)}))})),r.forEach((function(e){d.push(e)}))}function formValidate(){var e=document.getElementById("phone");IMask(e,{mask:"+{7}(000) 000-00-00"});var t=new JustValidate(".form",{rules:{firstName:{required:!0,minLength:3,maxLength:15},lastName:{required:!0,minLength:3,maxLength:15},email:{required:!0,email:!0},phone:{required:!0}},messages:{firstName:{minLength:"Min 3 symbol.",maxLength:"Max limit 15 symbol."},lastName:{minLength:"min 3 symbol",maxLength:"Max limit 15 symbol."},email:"enter the correct Email"}}),r=document.querySelector(".form"),n=document.querySelector(".contacts__pop-mesage");r.addEventListener("click",(function(e){1==t.isValidationSuccess&&(e.preventDefault(),n.classList.toggle("contacts__pop-mesage--active"),this.parentNode.remove())}))}function contactForm(){}function lazy(){lazyload()}var map;function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:{lat:-34.397,lng:150.644},zoom:8})}function mobileMenu(){var e=document.querySelector(".header__burger"),t=document.querySelector(".header__nav"),r=document.querySelector(".header__search"),n=document.querySelector(".header__discount-block");e.addEventListener("click",(function(){this.classList.toggle("active-burger"),t.classList.toggle("header__nav--active"),r.classList.toggle("header__search--active"),n.classList.toggle("header__discount-block--disabled"),document.body.classList.toggle("overflow")}))}function rating(){for(var e=document.querySelectorAll(".rating"),t=function(t){var r=e[t];r.onclick=function(e){for(var t=e.target.parentNode,c=0;c<r.children.length;c++){var i=r.children;t.classList.contains("rating__item")&&(n(i,"current-active"),t.classList.add("active","current-active"))}},r.onmouseover=function(e){for(var t=e.target.parentNode,c=0;c<r.children.length;c++){var o=r.children;t.classList.contains("rating__item")&&(n(o,"active"),t.classList.add("active"),i(o))}},r.onmouseout=function(){for(var e=0;e<r.children.length;e++){var t=r.children;c(t,"active"),o(t)}}},r=0;r<e.length;r++)t(r);function n(e){for(var t=0,r=e.length;t<r;t++)for(var n=1;n<arguments.length;n++)e[t].classList.remove(arguments[n])}function c(e){for(var t=0,r=e.length;t<r;t++)for(var n=1;n<arguments.length;n++)e[t].classList.add(arguments[n])}function i(e){for(var t=0,r=e.length;t<r&&!e[t].classList.contains("active");t++)e[t].classList.add("active")}function o(e){for(var t=e.length-1;t>=1&&!e[t].classList.contains("current-active");t--)e[t].classList.remove("active")}}function selects(){new Choices(".filter__select",{searchEnabled:!1,searchChoices:!1,duplicateItemsAllowed:!1,removeItemButton:!0,editItems:!0,noChoicesText:"",itemSelectText:"",classNames:{containerOuter:"choices filter__sort",containerInner:"choices__inner filter__inner",item:"filter__input-option",button:"choices__button filter__btn-choices"}})}function swiperCatalog(){new Swiper(".swiper",{direction:"horizontal",slidesPerView:4,spaceBetween:30,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{320:{slidesPerView:1.4},600:{slidesPerView:2.4},768:{slidesPerView:3},1e3:{slidesPerView:3},1400:{slidesPerView:4}}})}function video(){document.querySelector(".hero__video").currentTime=11}events(),accordion(),filter(),formValidate(),contactForm(),lazy(),mobileMenu(),rating(),selects(),swiperCatalog(),video();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV2ZW50cy5qcyIsImFjY29yZGlvbi9hY2NvcmRpb24uanMiLCJmaWx0ZXIvZmlsdGVyLmpzIiwiZm9ybS12YWxpZGF0ZS9mb3JtLXZhbGlkYXRlLmpzIiwiZm9ybXMvY29udGFjdC1mb3JtLmpzIiwibGF6eWxvYWQvbGF6eWxvYWQuanMiLCJtYXAvbWFwLmpzIiwibW9iaWxlLW1lbnUvbW9iaWxlLW1lbnUuanMiLCJyYXRpbmcvcmFpdGluZy5qcyIsInNlbGVjdC9zZWxlY3QuanMiLCJzd2lwZXIvc3dpcGVyLmpzIiwidmlkZW8vdmlkZW8uanMiXSwibmFtZXMiOlsiZXZlbnRzIiwibGlrZUNhcmQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJhbGxIZWFkZXIiLCJxdWVyeVNlbGVjdG9yIiwiaGVhZGVyIiwiaGVhZGVyTGluZSIsImhlcm8iLCJtYXJrZXRCdG4iLCJtYXJrZXRMaXN0IiwiZm9yRWFjaCIsImUiLCJhZGRFdmVudExpc3RlbmVyIiwidGhpcyIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIm1heFNjcm9sbCIsIndpbmRvdyIsInNjcm9sbFkiLCJyZW1vdmUiLCJhZGQiLCJ0YXJnZXQiLCJhY2NvcmRpb24iLCJpdGVtcyIsInRvZ2dsZUFjY29yZGlvbiIsInRoaXNJdGVtIiwicGFyZW50Tm9kZSIsIml0ZW0iLCJxdWVzdGlvbiIsImZpbHRlciIsImJ0bkZpbHRlciIsIm1hcmtldENhcmQiLCJmaWx0ZXJTZWFyY2giLCJzb3J0U2VsZWN0IiwiQ2hvaWNlcyIsInNlYXJjaEVuYWJsZWQiLCJzZWFyY2hDaG9pY2VzIiwiZHVwbGljYXRlSXRlbXNBbGxvd2VkIiwiZWRpdEl0ZW1zIiwiaXRlbVNlbGVjdFRleHQiLCJjbGFzc05hbWVzIiwiY29udGFpbmVyT3V0ZXIiLCJlbGVtZW50Iiwic2V0QXR0cmlidXRlIiwidGl0bGVCbG9jayIsImNyZWF0ZUVsZW1lbnQiLCJ0aXRsZUZpbHRlciIsImJ0bkNsb3NlIiwiYXJyIiwiZW51bUFyciIsImkiLCJsZW5ndGgiLCJhcHBlbmQiLCJ0ZXh0Q29udGVudCIsInByZXBlbmQiLCJib2R5IiwicGFzc2VkRWxlbWVudCIsImRldGFpbCIsImNob2ljZSIsInZhbHVlIiwic29ydCIsImEiLCJiIiwiYyIsImNoaWxkcmVuIiwiaW5wdXQiLCJzdHlsZSIsImhlaWdodCIsImluY2x1ZGVzIiwicHVzaCIsImZvcm1WYWxpZGF0ZSIsImdldEVsZW1lbnRCeUlkIiwiSU1hc2siLCJtYXNrIiwidmFsaWQiLCJKdXN0VmFsaWRhdGUiLCJydWxlcyIsImZpcnN0TmFtZSIsInJlcXVpcmVkIiwibWluTGVuZ3RoIiwibWF4TGVuZ3RoIiwibGFzdE5hbWUiLCJlbWFpbCIsInBob25lIiwibWVzc2FnZXMiLCJmb3JtIiwicG9wTWVzYWdlIiwiaXNWYWxpZGF0aW9uU3VjY2VzcyIsInByZXZlbnREZWZhdWx0IiwiY29udGFjdEZvcm0iLCJsYXp5IiwibGF6eWxvYWQiLCJtYXAiLCJpbml0TWFwIiwiZ29vZ2xlIiwibWFwcyIsIk1hcCIsImNlbnRlciIsImxhdCIsImxuZyIsInpvb20iLCJtb2JpbGVNZW51IiwiYnVyZ2VyIiwibmF2IiwiaGVhZGVyU2VhcmNoIiwiaGVhZGVyRGlzY291bnQiLCJyYXRpbmciLCJfbG9vcCIsInQiLCJlbGVtIiwib25jbGljayIsImNvbnRhaW5zIiwicmVtb3ZlQ2xhc3MiLCJvbm1vdXNlb3ZlciIsIm1vdXNlT3ZlckFjdGl2ZUNsYXNzIiwib25tb3VzZW91dCIsImFkZENsYXNzIiwibW91c2VPdXRBY3RpdmVDbGFzIiwiaUxlbiIsImoiLCJhcmd1bWVudHMiLCJzZWxlY3RzIiwicmVtb3ZlSXRlbUJ1dHRvbiIsIm5vQ2hvaWNlc1RleHQiLCJjb250YWluZXJJbm5lciIsImJ1dHRvbiIsInN3aXBlckNhdGFsb2ciLCJTd2lwZXIiLCJkaXJlY3Rpb24iLCJzbGlkZXNQZXJWaWV3Iiwic3BhY2VCZXR3ZWVuIiwibmF2aWdhdGlvbiIsIm5leHRFbCIsInByZXZFbCIsImJyZWFrcG9pbnRzIiwidmlk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U0FBU0csY0FBYyxnQkFHL0JvSSxZQUFjLEdYOEN0QnpJLFNDaENBdUIsWUM0RUFPLFNDeENBeUMsZUM3Q0FtQixjQ05BQyxPRVVFVyxhQzJERkssU0N0REFlLFVDYUFLLGdCQ3pCQVMiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGV2ZW50cygpIHtcclxuICAgIGNvbnN0IGxpa2VDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhcmRfX2xpa2UnKTtcclxuICAgIGNvbnN0IGFsbEhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXInKTtcclxuICAgIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2JvdHRvbS1uYXYnKTtcclxuICAgIGNvbnN0IGhlYWRlckxpbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19kaXNjb3VudC1ibG9jaycpO1xyXG4gICAgY29uc3QgaGVybyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZXJvICcpO1xyXG4gICAgY29uc3QgbWFya2V0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1hcmtldF9fYnRuJyk7XHJcbiAgICBjb25zdCBtYXJrZXRMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1hcmtldF9fbGlzdCcpO1xyXG5cclxuICAgIGxpa2VDYXJkLmZvckVhY2goZSA9PiB7XHJcblxyXG4gICAgICAgIGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZF9fbGlrZS0tYWN0aXZlJyk7XHJcbiAgICAgICAgfSlcclxuICAgIH0pO1xyXG4gICAgbGV0IG1heFNjcm9sbCA9IDA7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZnVuY3Rpb24gKGUpIHtcclxuXHJcbiAgICAgICAgaWYgKHdpbmRvdy5zY3JvbGxZID4gbWF4U2Nyb2xsKSB7XHJcbiAgICAgICAgICAgIG1heFNjcm9sbCA9IHdpbmRvdy5zY3JvbGxZO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhbGxIZWFkZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGVhZGVyLS1hY3RpdmUnKVxyXG4gICAgICAgIGlmICh3aW5kb3cuc2Nyb2xsWSA8PSAzNSkge1xyXG4gICAgICAgICAgICBhbGxIZWFkZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGVhZGVyLS1hY3RpdmUnKVxyXG4gICAgICAgICAgICBoZWFkZXJMaW5lLmNsYXNzTGlzdC5yZW1vdmUoJ2hlYWRlcl9fZGlzY291bnQtYmxvY2stLWFjdGl2ZScpXHJcbiAgICAgICAgICAgIGhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKCdoZWFkZXJfX2JvdHRvbS1uYXYtLWFjdGl2ZScpXHJcbiAgICAgICAgICAgIGhlcm8uY2xhc3NMaXN0LnJlbW92ZSgnaGVyby0tYWN0aXZlJylcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG1heFNjcm9sbCA+IHdpbmRvdy5zY3JvbGxZKSB7XHJcbiAgICAgICAgICAgIG1heFNjcm9sbCA9IHdpbmRvdy5zY3JvbGxZO1xyXG4gICAgICAgICAgICBhbGxIZWFkZXIuY2xhc3NMaXN0LmFkZCgnaGVhZGVyLS1hY3RpdmUnKVxyXG4gICAgICAgICAgICBoZWFkZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGVhZGVyX19ib3R0b20tbmF2LS1hY3RpdmUnKVxyXG4gICAgICAgICAgICBoZWFkZXJMaW5lLmNsYXNzTGlzdC5yZW1vdmUoJ2hlYWRlcl9fZGlzY291bnQtYmxvY2stLWFjdGl2ZScpXHJcbiAgICAgICAgICAgIGhlcm8uY2xhc3NMaXN0LmFkZCgnaGVyby0tYWN0aXZlJylcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGFsbEhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKCdoZWFkZXItLWFjdGl2ZScpXHJcbiAgICAgICAgICAgIGhlYWRlckxpbmUuY2xhc3NMaXN0LmFkZCgnaGVhZGVyX19kaXNjb3VudC1ibG9jay0tYWN0aXZlJylcclxuICAgICAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoJ2hlYWRlcl9fYm90dG9tLW5hdi0tYWN0aXZlJylcclxuICAgICAgICAgICAgaGVyby5jbGFzc0xpc3QuYWRkKCdoZXJvLS1hY3RpdmUnKVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgfSlcclxuXHJcbiAgICBtYXJrZXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIG1hcmtldExpc3QuY2xhc3NMaXN0LmFkZCgnbWFya2V0X19saXN0LS1hY3RpdmUnKTtcclxuICAgICAgICBlLnRhcmdldC5yZW1vdmUoKTtcclxuICAgIH0pXHJcbn1cclxuZXZlbnRzKCkiLCIgZnVuY3Rpb24gYWNjb3JkaW9uKCkge1xyXG4gICAgbGV0IGFjY29yZGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY2NvcmRpb24nKTtcclxuICAgIGxldCBpdGVtcyA9IGFjY29yZGlvbi5xdWVyeVNlbGVjdG9yQWxsKCcuYWNjb3JkaW9uX19pdGVtJyk7XHJcbiAgICBsZXQgdGl0bGUgPSBhY2NvcmRpb24ucXVlcnlTZWxlY3RvckFsbCgnLmFjY29yZGlvbl9fdGl0bGUtYmxvY2snKTtcclxuXHJcbiAgICBmdW5jdGlvbiB0b2dnbGVBY2NvcmRpb24oKSB7XHJcbiAgICAgICAgbGV0IHRoaXNJdGVtID0gdGhpcy5wYXJlbnROb2RlO1xyXG5cclxuICAgICAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpc0l0ZW0gPT0gaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgdGhpc0l0ZW0uY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB0aXRsZS5mb3JFYWNoKHF1ZXN0aW9uID0+IHF1ZXN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlQWNjb3JkaW9uKSk7XHJcbn1cclxuYWNjb3JkaW9uKCkgIiwiZnVuY3Rpb24gZmlsdGVyKCkge1xyXG4gICAgY29uc3QgYnRuRmlsdGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1hcmtldF9fYnRuLWZpbHRlcicpO1xyXG4gICAgY29uc3QgZmlsdGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZpbHRlcicpO1xyXG4gICAgY29uc3QgbWFya2V0Q2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tYXJrZXRfX2NhcmQnKTtcclxuICAgIGNvbnN0IG1hcmtldExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFya2V0X19saXN0Jyk7XHJcbiAgICBjb25zdCBmaWx0ZXJTZWFyY2ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmlsdGVyX19zZWFyY2gnKTtcclxuICAgIGNvbnN0IG1hcmtldEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYXJrZXRfX2J0bicpO1xyXG5cclxuICAgIGNvbnN0IHNvcnRTZWxlY3QgPSBuZXcgQ2hvaWNlcygnLm1hcmtldF9fc29ydCcsIHtcclxuICAgICAgICBzZWFyY2hFbmFibGVkOiBmYWxzZSxcclxuICAgICAgICBzZWFyY2hDaG9pY2VzOiBmYWxzZSxcclxuICAgICAgICBkdXBsaWNhdGVJdGVtc0FsbG93ZWQ6IGZhbHNlLFxyXG4gICAgICAgIGVkaXRJdGVtczogdHJ1ZSxcclxuICAgICAgICBpdGVtU2VsZWN0VGV4dDogJycsXHJcbiAgICAgICAgY2xhc3NOYW1lczoge1xyXG4gICAgICAgICAgICBjb250YWluZXJPdXRlcjogJ2Nob2ljZXMgbWFya2V0X19zb3J0JyxcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBzb3J0U2VsZWN0LmNvbnRhaW5lck91dGVyLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ3NvcnQnKVxyXG4gICAgbGV0IHRpdGxlQmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGxldCB0aXRsZUZpbHRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XHJcbiAgICBsZXQgYnRuQ2xvc2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgIGxldCBhcnIgPSBbXTtcclxuXHJcblxyXG4gICAgdGl0bGVCbG9jay5jbGFzc0xpc3QuYWRkKCdmaWx0ZXJfX3RpdGxlLWJsb2NrJyk7XHJcbiAgICB0aXRsZUZpbHRlci5jbGFzc0xpc3QuYWRkKCdmaWx0ZXJfX3RpdGxlLW1vYmlsZScsICd0aXRsZScpO1xyXG4gICAgYnRuQ2xvc2UuY2xhc3NMaXN0LmFkZCgnZmlsdGVyX19idG4tY2xvc2UnKTtcclxuICAgIHRpdGxlRmlsdGVyLnRleHRDb250ZW50ID0gXCJGaWx0ZXJcIjtcclxuXHJcbiAgICB0aXRsZUJsb2NrLmFwcGVuZCh0aXRsZUZpbHRlciwgYnRuQ2xvc2UpO1xyXG5cclxuICAgIGJ0bkZpbHRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZmlsdGVyLmNsYXNzTGlzdC5hZGQoJ2ZpbHRlci0tYWN0aXZlJyk7XHJcbiAgICAgICAgZmlsdGVyLnByZXBlbmQodGl0bGVCbG9jayk7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdvdmVyZmxvdycpO1xyXG4gICAgfSlcclxuICAgIGJ0bkNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZpbHRlci5jbGFzc0xpc3QucmVtb3ZlKCdmaWx0ZXItLWFjdGl2ZScpO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnb3ZlcmZsb3cnKTtcclxuICAgIH0pXHJcbiAgICBzb3J0U2VsZWN0LnBhc3NlZEVsZW1lbnQuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjaG9pY2UnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGlmIChlLmRldGFpbC5jaG9pY2UudmFsdWUgPT0gJ2xvdycpIHNvcnRsb3coKVxyXG4gICAgICAgIGVsc2Ugc29ydEhpZ2h0KClcclxuXHJcbiAgICB9KTtcclxuICAgIGZpbHRlclNlYXJjaC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGxldCBpbnB1dCA9IGUudGFyZ2V0LmNoaWxkcmVuWzBdLnZhbHVlO1xyXG4gICAgICAgIG1hcmtldExpc3Quc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xyXG4gICAgICAgIG1hcmtldEJ0bi5yZW1vdmUoKTtcclxuICAgICAgICBkZWxFbGVtKClcclxuICAgICAgICBhcnIgPSBhcnIuZmlsdGVyKGUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0aXRsZSA9IGUuY2hpbGRyZW5bMl0uY2hpbGRyZW5bMF0udGV4dENvbnRlbnQ7XHJcbiAgICAgICAgICAgIGlmICh0aXRsZS5pbmNsdWRlcyhpbnB1dCkpIHtcclxuICAgICAgICAgICAgICAgIG1hcmtldExpc3QuYXBwZW5kKGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICB9KVxyXG4gICAgbWFya2V0Q2FyZC5mb3JFYWNoKGUgPT4ge1xyXG4gICAgICAgIGFyci5wdXNoKGUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gZGVsRWxlbSgpIHtcclxuICAgICAgICByZXR1cm4gbWFya2V0Q2FyZC5mb3JFYWNoKGUgPT4ge1xyXG4gICAgICAgICAgICBlLnJlbW92ZSgpXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGVudW1BcnIoYXJyKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGFycltpXTtcclxuICAgICAgICAgICAgbWFya2V0TGlzdC5hcHBlbmQoZWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc29ydEhpZ2h0KCkge1xyXG5cclxuICAgICAgICBhcnIuc29ydChmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICBsZXQgYyA9IGEuY2hpbGRyZW5bMl0uY2hpbGRyZW5bMV0uY2hpbGRyZW5bMV0uY2hpbGRyZW5bMF0udGV4dENvbnRlbnQ7XHJcbiAgICAgICAgICAgIGxldCBkID0gYi5jaGlsZHJlblsyXS5jaGlsZHJlblsxXS5jaGlsZHJlblsxXS5jaGlsZHJlblswXS50ZXh0Q29udGVudDtcclxuICAgICAgICAgICAgcmV0dXJuIGMgLSBkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGVudW1BcnIoYXJyKVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc29ydGxvdygpIHtcclxuXHJcbiAgICAgICAgYXJyLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgbGV0IGMgPSBhLmNoaWxkcmVuWzJdLmNoaWxkcmVuWzFdLmNoaWxkcmVuWzFdLmNoaWxkcmVuWzBdLnRleHRDb250ZW50O1xyXG4gICAgICAgICAgICBsZXQgZCA9IGIuY2hpbGRyZW5bMl0uY2hpbGRyZW5bMV0uY2hpbGRyZW5bMV0uY2hpbGRyZW5bMF0udGV4dENvbnRlbnQ7XHJcbiAgICAgICAgICAgIHJldHVybiBkIC0gYztcclxuICAgICAgICB9KTtcclxuICAgICAgICBlbnVtQXJyKGFycilcclxuICAgIH1cclxufVxyXG5maWx0ZXIoKSIsIlxyXG5mdW5jdGlvbiBmb3JtVmFsaWRhdGUoKSB7XHJcblxyXG4gICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGhvbmUnKTtcclxuICAgIHZhciBtYXNrT3B0aW9ucyA9IHtcclxuICAgICAgICBtYXNrOiAnK3s3fSgwMDApIDAwMC0wMC0wMCdcclxuICAgIH07XHJcbiAgICBJTWFzayhlbGVtZW50LCBtYXNrT3B0aW9ucyk7XHJcblxyXG4gICAgbGV0IHZhbGlkID0gbmV3IEp1c3RWYWxpZGF0ZSgnLmZvcm0nLCB7XHJcbiAgICAgICAgcnVsZXM6IHtcclxuICAgICAgICAgICAgZmlyc3ROYW1lOiB7XHJcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1pbkxlbmd0aDogMyxcclxuICAgICAgICAgICAgICAgIG1heExlbmd0aDogMTVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGFzdE5hbWU6IHtcclxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbWluTGVuZ3RoOiAzLFxyXG4gICAgICAgICAgICAgICAgbWF4TGVuZ3RoOiAxNVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbWFpbDoge1xyXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBlbWFpbDogdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBwaG9uZToge1xyXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICBtZXNzYWdlczoge1xyXG4gICAgICAgICAgICBmaXJzdE5hbWU6IHtcclxuICAgICAgICAgICAgICAgIG1pbkxlbmd0aDogJ01pbiAzIHN5bWJvbC4nLFxyXG4gICAgICAgICAgICAgICAgbWF4TGVuZ3RoOiAnTWF4IGxpbWl0IDE1IHN5bWJvbC4nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGxhc3ROYW1lOiB7XHJcbiAgICAgICAgICAgICAgICBtaW5MZW5ndGg6ICdtaW4gMyBzeW1ib2wnLFxyXG4gICAgICAgICAgICAgICAgbWF4TGVuZ3RoOiAnTWF4IGxpbWl0IDE1IHN5bWJvbC4nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVtYWlsOiAnZW50ZXIgdGhlIGNvcnJlY3QgRW1haWwnXHJcbiAgICAgICAgfSxcclxuICAgIH0pXHJcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcclxuICAgIGNvbnN0IHBvcE1lc2FnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWN0c19fcG9wLW1lc2FnZScpO1xyXG5cclxuICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG5cclxuICAgICAgICBpZiAodmFsaWQuaXNWYWxpZGF0aW9uU3VjY2VzcyA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxyXG4gICAgICAgICAgICBwb3BNZXNhZ2UuY2xhc3NMaXN0LnRvZ2dsZSgnY29udGFjdHNfX3BvcC1tZXNhZ2UtLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUucmVtb3ZlKClcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG5cclxufVxyXG5mb3JtVmFsaWRhdGUoKSIsImZ1bmN0aW9uIGNvbnRhY3RGb3JtKCkge1xyXG4gICAgLy8gY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XHJcbiAgICAvLyBjb25zdCBmb3JtQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fX2J0bicpO1xyXG5cclxuICAgIC8vIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgLy8gICAgIGUucHJldmVudERlZmF1bHQoKVxyXG4gICAgLy8gICAgIGNvbnNvbGUuZGlyKGUpXHJcbiAgICAvLyB9KVxyXG59XHJcbmNvbnRhY3RGb3JtKCkiLCIgZnVuY3Rpb24gbGF6eSgpIHtcclxuICAgIGxhenlsb2FkKCk7XHJcbn1cclxubGF6eSgpIiwiXHJcbiAgXHJcbiAgbGV0IG1hcDtcclxuICAgIGZ1bmN0aW9uIGluaXRNYXAoKSB7XHJcbiAgICAgICAgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcFwiKSwge1xyXG4gICAgICAgICAgICBjZW50ZXI6IHsgbGF0OiAtMzQuMzk3LCBsbmc6IDE1MC42NDQgfSxcclxuICAgICAgICAgICAgem9vbTogOCxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuIiwiXHJcbiBmdW5jdGlvbiBtb2JpbGVNZW51KCkge1xyXG4gICAgY29uc3QgYnVyZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fYnVyZ2VyJyk7XHJcbiAgICBjb25zdCBuYXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19uYXYnKTtcclxuICAgIGNvbnN0IGhlYWRlclNlYXJjaCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX3NlYXJjaCcpO1xyXG4gICAgY29uc3QgaGVhZGVyRGlzY291bnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19kaXNjb3VudC1ibG9jaycpO1xyXG4gICAgYnVyZ2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlLWJ1cmdlcicpO1xyXG4gICAgICAgIG5hdi5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXJfX25hdi0tYWN0aXZlJyk7XHJcbiAgICAgICAgaGVhZGVyU2VhcmNoLmNsYXNzTGlzdC50b2dnbGUoJ2hlYWRlcl9fc2VhcmNoLS1hY3RpdmUnKVxyXG4gICAgICAgIGhlYWRlckRpc2NvdW50LmNsYXNzTGlzdC50b2dnbGUoJ2hlYWRlcl9fZGlzY291bnQtYmxvY2stLWRpc2FibGVkJyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKCdvdmVyZmxvdycpO1xyXG4gICAgfSlcclxufSBtb2JpbGVNZW51KCkiLCIgZnVuY3Rpb24gcmF0aW5nKCkge1xyXG4gIHZhciByYXRpbmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmF0aW5nJyk7XHJcblxyXG4gIGZvciAobGV0IHQgPSAwOyB0IDwgcmF0aW5nLmxlbmd0aDsgdCsrKSB7XHJcbiAgICBsZXQgZWxlbSA9IHJhdGluZ1t0XTtcclxuICAgIGVsZW0ub25jbGljayA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldC5wYXJlbnROb2RlO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW0uY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBlbGVtZW50ID0gZWxlbS5jaGlsZHJlbjtcclxuXHJcbiAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3JhdGluZ19faXRlbScpKSB7XHJcbiAgICAgICAgICByZW1vdmVDbGFzcyhlbGVtZW50LCAnY3VycmVudC1hY3RpdmUnKVxyXG4gICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScsICdjdXJyZW50LWFjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGVsZW0ub25tb3VzZW92ZXIgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQucGFyZW50Tm9kZTtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGVsZW0uY2hpbGRyZW47XHJcbiAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3JhdGluZ19faXRlbScpKSB7XHJcbiAgICAgICAgICByZW1vdmVDbGFzcyhlbGVtZW50LCAnYWN0aXZlJylcclxuICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICAgIG1vdXNlT3ZlckFjdGl2ZUNsYXNzKGVsZW1lbnQpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbGVtLm9ubW91c2VvdXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBlbGVtLmNoaWxkcmVuO1xyXG4gICAgICAgIGFkZENsYXNzKGVsZW1lbnQsICdhY3RpdmUnKTtcclxuICAgICAgICBtb3VzZU91dEFjdGl2ZUNsYXMoZWxlbWVudCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgfVxyXG4gIGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGFycikge1xyXG4gICAgZm9yICh2YXIgaSA9IDAsIGlMZW4gPSBhcnIubGVuZ3RoOyBpIDwgaUxlbjsgaSsrKSB7XHJcbiAgICAgIGZvciAodmFyIGogPSAxOyBqIDwgYXJndW1lbnRzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgYXJyW2ldLmNsYXNzTGlzdC5yZW1vdmUoYXJndW1lbnRzW2pdKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBmdW5jdGlvbiBhZGRDbGFzcyhhcnIpIHtcclxuICAgIGZvciAodmFyIGkgPSAwLCBpTGVuID0gYXJyLmxlbmd0aDsgaSA8IGlMZW47IGkrKykge1xyXG4gICAgICBmb3IgKHZhciBqID0gMTsgaiA8IGFyZ3VtZW50cy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgIGFycltpXS5jbGFzc0xpc3QuYWRkKGFyZ3VtZW50c1tqXSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG1vdXNlT3ZlckFjdGl2ZUNsYXNzKGFycikge1xyXG4gICAgZm9yICh2YXIgaSA9IDAsIGlMZW4gPSBhcnIubGVuZ3RoOyBpIDwgaUxlbjsgaSsrKSB7XHJcbiAgICAgIGlmIChhcnJbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFycltpXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gbW91c2VPdXRBY3RpdmVDbGFzKGFycikge1xyXG4gICAgZm9yICh2YXIgaSA9IGFyci5sZW5ndGggLSAxOyBpID49IDE7IGktLSkge1xyXG4gICAgICBpZiAoYXJyW2ldLmNsYXNzTGlzdC5jb250YWlucygnY3VycmVudC1hY3RpdmUnKSkge1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFycltpXS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5yYXRpbmcoKSIsIiBmdW5jdGlvbiBzZWxlY3RzKCkge1xyXG4gICAgIG5ldyBDaG9pY2VzKCcuZmlsdGVyX19zZWxlY3QnLCB7XHJcbiAgICAgICAgc2VhcmNoRW5hYmxlZDogZmFsc2UsXHJcbiAgICAgICAgc2VhcmNoQ2hvaWNlczogZmFsc2UsXHJcbiAgICAgICAgZHVwbGljYXRlSXRlbXNBbGxvd2VkOiBmYWxzZSxcclxuICAgICAgICByZW1vdmVJdGVtQnV0dG9uOiB0cnVlLFxyXG4gICAgICAgIGVkaXRJdGVtczogdHJ1ZSxcclxuICAgICAgICBub0Nob2ljZXNUZXh0OiAnJyxcclxuICAgICAgICBpdGVtU2VsZWN0VGV4dDogJycsXHJcblxyXG4gICAgICAgIGNsYXNzTmFtZXM6IHtcclxuICAgICAgICAgICAgY29udGFpbmVyT3V0ZXI6ICdjaG9pY2VzIGZpbHRlcl9fc29ydCcsXHJcbiAgICAgICAgICAgIGNvbnRhaW5lcklubmVyOiAnY2hvaWNlc19faW5uZXIgZmlsdGVyX19pbm5lcicsXHJcbiAgICAgICAgICAgIGl0ZW06ICdmaWx0ZXJfX2lucHV0LW9wdGlvbicsXHJcbiAgICAgICAgICAgIGJ1dHRvbjogJ2Nob2ljZXNfX2J1dHRvbiBmaWx0ZXJfX2J0bi1jaG9pY2VzJyxcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5zZWxlY3RzKCkiLCJcclxuIGZ1bmN0aW9uIHN3aXBlckNhdGFsb2coKSB7XHJcbiAgICAgbmV3IFN3aXBlcignLnN3aXBlcicsIHtcclxuICAgICAgICBkaXJlY3Rpb246ICdob3Jpem9udGFsJyxcclxuICAgICAgICBzbGlkZXNQZXJWaWV3OiA0LFxyXG4gICAgICAgIHNwYWNlQmV0d2VlbjogMzAsXHJcblxyXG4gICAgICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgICAgICAgbmV4dEVsOiAnLnN3aXBlci1idXR0b24tbmV4dCcsXHJcbiAgICAgICAgICAgIHByZXZFbDogJy5zd2lwZXItYnV0dG9uLXByZXYnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYnJlYWtwb2ludHM6IHtcclxuICAgICAgICAgICAgMzIwOiB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLjQsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIDYwMDoge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMi40LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICA3Njg6IHtcclxuICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDMsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIDEwMDA6IHtcclxuICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDMsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIDE0MDA6IHtcclxuICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDQsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfSk7XHJcbn1cclxuc3dpcGVyQ2F0YWxvZygpIiwiZnVuY3Rpb24gdmlkZW8oKSB7XHJcbiAgICBjb25zdCB2aWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVyb19fdmlkZW8nKTtcclxuXHJcbiAgICBcclxuICAgIHZpZC5jdXJyZW50VGltZSA9IDExO1xyXG59XHJcbnZpZGVvKCkiXX0=
